<html>	<head>		<title>JS1K Demo</title>		<meta charset="utf-8">	</head>		<body>		<canvas id="c" width="1024" height="768">		<script>			var b = document.body;			var c = document.getElementsByTagName('canvas')[0];			var a = c.getContext('2d');			document.body.clientWidth; // fix bug in webkit: http://qfox.nl/weblog/218		</script>				<script>			N = -1;			m = 16, n = m * m, o = [], p = [				[1, 0],				[0, 1],				[N, 0],				[0, N],				[1, 1],				[1, N],				[N, N],				[N, 1]			], q = document.body.children[0], r = q.getContext("2d");			o.X = 3;			q.width = q.height = n;			r.font = "64px serif";			for (_ = 8; _ < n; _ += m) {				r.fillRect(_, 0, 1, n);				r.fillRect(0, _, n, 1)			}			s(7, 7, 2);			function s(c, d, e) {				if (o[_ = 0 <= d && d < m && 0 <= c && c < m ? d * m + c : "X"]) return 1;				o[_] = e;				r.beginPath();				r.arc(_ % m * m + 8, (_ & -m) + 8, 7, 0, 360, 0);				r.fillStyle = e == 2 ? "#fff" : (l = "#000");				r.fill();				r.stroke()			}			function t(c) {				p.push(p.splice(4 + +new Date % 4, 1)[0]);				[1, 2].map(function(d) {					a = d;					p.map(function(e) {						g = e[0];						h = e[1];						for (x = 0; x < m; ++x)							for (y = 0; y < m; ++y) c()					})				})			}			function u(c) {				return c.every(function(d, e) {					f = y + h * e;					b = x + g * e;					return (d ? a : 0) == (o[0 <= f && f < m && 0 <= b && b < m ? f * m + b : "X"] | 0)				})			}			function v() {				t(function() {					if (u([1, 1, 1, 1, 1])) {						r.fillStyle = l;						r.fillText(a == 1 ? "WIN" : "LOSE", 0, n);						s = isNaN					}				})			}			q.onclick = function(c) {				if (!s(c.clientX - q.offsetLeft >> 4, c.clientY - q.offsetTop >> 4, 1)) {					v();					[						[1, 1, 0],						[2, 1, 1, 0, 0, 0],						[0, 0, 1, 1, 1, 0],						[3, 0, 1, 1, 0, 1, 0],						[1, 1, 0, 1, 1, 1],						[2, 1, 1, 0, 1, 1],						[0, 0, 1, 1, 1, 1],						[3, 1, 0, 1, 0, 1, 0, 1]					].map(function(d) {						i = d.shift();						t(function() {							if (u(d)) {								j = x + g * i;								k = y + h * i							}						})					});					s(j, k, 2);					v()				}			}		</script>			</body></html>	