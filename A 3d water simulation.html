<html>	<head>		<title>JS1K Demo</title>		<meta charset="utf-8">	</head>		<body>		<canvas id="c" width="1024" height="768">		<script>			var b = document.body;			var c = document.getElementsByTagName('canvas')[0];			var a = c.getContext('2d');			document.body.clientWidth; // fix bug in webkit: http://qfox.nl/weblog/218		</script>				<script>m = Math;l = document;l.onkeyup = function() {    j = !j};z = "lineTo";a = l.body.children[0];a.width = 700;a.height = 350;b = a.getContext("2d");a = m.random;b.lineWidth = 0.5;c = [];d = [];e = [];h = 1.8;j = true;function k(o) {    return m.round(o) + 0.5}q = m.floor;t = m.abs;function p(o, r, s, t, z) {    b.strokeStyle = b.fillStyle = "rgb(50,50," + z + ")";    b.beginPath();    b.moveTo(k(o[0]), k(o[1]));    b.lineTo(k(r[0]), k(r[1]));    b.lineTo(k(s[0]), k(s[1]));    b.lineTo(k(t[0]), k(t[1]));    b.lineTo(k(o[0]), k(o[1]));    j ? b.fill() : 0;    b.stroke()}for (i = 0; i < 1600; i++) {    c[i] = d[i] = 0;    e[i] = []}setInterval(function() {    g = c;    c = d;    d = g;    h += 0.01;    for (y = 1; y < 39; y++)        for (x = 1; x < 39; x++) {            i = x + y * 40;            d[i] = ((c[i - 40] + c[i + 1] + c[i + 40] + c[i - 1]) / 2 - d[i]) * 0.9        }    f = m.cos(h);    g = m.sin(h);    i = 0;    for (y = -10; y < 10; y += 0.5)        for (x = -10; x < 10; x += 0.5) {            u = x * f - y * g;            v = 8E3 / (y * f + x * g + 350);            n = e[i];            n[0] = u * v + 350;            n[1] = (d[i++] + 100) * v - 2150        }    if (10 * a() < 1) c[q(1 + 37 * a()) + q(1 + 37 * a()) * 40] = 1 + a();    b.clearRect(0, 0, 700, 700);    for (y = 0; y < 39; y++) {        x = 0;        for (i = y * 40; x < 39; x++, i++) {            u = e[i];            v = e[i + 1];            w = e[i + 40];            f = e[i + 41];            p(w, u, v, f, 128 + q(256 * m.max(t(d[i]), t(d[i + 1]), t(d[i + 40]), t(d[i + 41]))))        }    }}, 50);		</script>			</body></html>	