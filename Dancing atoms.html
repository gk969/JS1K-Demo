<html>
	<head>
		<title>JS1K Demo</title>
		<meta charset="utf-8">
	</head>
	
	<body>
		<canvas id="c" width="1024" height="768">
		<script>
      var a = document.getElementsByTagName('canvas')[0];
      var b = document.body;
      var d = function(e){ return function(){ e.parentNode.removeChild(e); }; }(a);
      // unprefix some popular vendor prefixed things (but stick to their original name)
      var AudioContext =
        window.AudioContext ||
          window.webkitAudioContext;
      var requestAnimationFrame =
        window.requestAnimationFrame ||
          window.mozRequestAnimationFrame ||
          window.webkitRequestAnimationFrame ||
          window.msRequestAnimationFrame ||
          function(f){ setTimeout(f, 1000/30); };
      // fix bug in safari: http://qfox.nl/weblog/218
      document.body.clientWidth;
      // auto resize (original) canvas. call `onresize(w,h) to limit the size of the canvas
      (window.onorientationchange = window.onresize = function(a){
        var mw = Infinity;
        var mh = Infinity;
        var min = Math.min;

        return function(w,h){
          if (arguments.length === 2) {
            mw = w;
            mh = h;
          }
          a.style.width = (a.width = min(mw, innerWidth)) + 'px';
          a.style.height = (a.height = min(mh, innerHeight)) + 'px';
        };
      }(a))();

      var c = a.getContext('2d');
    
		</script>
		
		<script>
w = a.width;
h = a.height;
q = 0;
b.style.background = "#000";
v = [49, -101, -94, 36, -91, -50, 6, -54, -49, -31, -70, -75, -18, -79, -118, 12, -115, -120, 83, -125, -85, 95, -115, -48, 72, -90, -32, -66, -46, -84, -54, -81, -137, -78, -58, -121, -6, -41, -6, 28, -25, 22, 11, -13, 61, 28, -127, -174, 52, 11, 4, 61, -74, -109, 20, -116, -37, 19, -28, -65, -43, -97, -60, -2, -54, -132, -1, -142, -107, 49, -50, 28, 96, -145, -103, 120, -125, -35, -80, -27, -66, -103, -49, -133, -29, -18, -8, -20, -67, 9, -9, 10, 57, -4, -37, 73, 34, -4, 79, 73, 22, 26, 31, 35, -4, 69, 2, -22];
b = Math;
re = setInterval(function() {
    l = [];
    c.clearRect(0, 0, w, h);
    d = c.getImageData(0, 0, w, h);
    q += 0.04;
    for (i = 0; 108 > i; i += 3) x = v[i], y = v[i + 1], z = v[i + 2], cos = b.cos(q), sin = b.sin(0.7 * q), yz = cos * (sin * y + cos * z) - sin * x, x = b.round(sin * (sin * y + cos * z) + cos * x + w / 2), y = b.round(cos * y - sin * z + h / 2), l.push([x, y, yz]);
    l.sort(function(e, k) {
        return e[2] < k[2] ? -1 : 1
    });
    for (i = 0; 36 > i; i++)
        for (m = l[i], x = m[0], y = m[1], u = -20; 20 > u; u++)
            for (o = -20; 20 > o; o++) p = (y + o) * w * 4 + 4 * (x + u), val = 381 + 127 * b.sin((x + u) / 2) + 127 * b.sin(b.sqrt((x + u) * (x + u) + (y + o) * (y + o))) + 127 * b.sin((y + o) / 2) / 3, g = x - (x + u), f = y - (y + o), di = b.sqrt(g * g + f * f), 20 > di && (r = 127 + 127 * b.sin(b.PI * val / (20 * m[2])), d.data[p] = r, d.data[p + 1] = 128 + 127 * b.cos(b.PI * val / 256), d.data[p + 2] = 255 - r / 2, d.data[p + 3] = 255 - 13 * di + m[2]);
    c.putImageData(d, 0, 0);
    c.fillStyle = "#fff";
    c.fillText("Bromo-Dragonfly, 36 atoms", 0.1 * w, 0.9 * h)
}, 16);
		</script>
		
	</body>
</html>
	