<html>	<head>		<title>JS1K Demo</title>		<meta charset="utf-8">	</head>		<body>		<canvas id="c" width="1024" height="768">		<script>			var b = document.body;			var c = document.getElementsByTagName('canvas')[0];			var a = c.getContext('2d');			document.body.clientWidth; // fix bug in webkit: http://qfox.nl/weblog/218		</script>				<script>d = document.body;a = d.style.margin = 0;C = d.children[0];j = C.width = innerWidth;k = C.height = innerHeight;C = C.getContext("2d");M = Math;D = [];H = [];E = [];F = 'fillRect';J = 'fillStyle';P = 2e3;O = 2e4;r = M.random;C.font = "24px Arial";C.fillText("js1k", 0, 20);e = 45;f = 25;d = C.getImageData(0, 0, e, f);while (a < P) {    x = r() * e;    y = r() * f;    if (d.data[((y | 0) * e + (x | 0)) * 4 + 3] > 9) H[a++] = [(x - e / 2) / f * 2.5, (.5 - y / f) * 2.5, r() / 2]}v = C.createRadialGradient(j / 2, k * .66, 0, j / 2, k, k / 2);v[a = 'addColorStop'](0, "#454");v[a](1, "#000");C[J] = v;C[F](0, 0, j, k);for (i = 0; i < P; i++) {    a = r() * 2 - 1;    b = r() * 2 - 1;    c = r() * 2 - 1;    d = M.pow(a * a + b * b + c * c, .5) / 2;    D[i] = [a / d, b / d + 1, c / d]}function q() {    C[F](a[0] | 0, a[1] | 0, 1, 1)}function n(i) {    return (w[i] - b[i]) * M.pow(m, 5) + b[i]}(function X() {    g = (new Date()).getTime() % O / O * 4;    for (i = 0; i < P; a = E[i++]) a ? q(C[J] = v) : 0;    e = M.cos(a = g * M.PI * 2);    f = M.sin(a);    for (i = 0; i < P; b = H[i++]) {        w = D[i];        m = g % 1;        if (g >= 1) m = 1;        if (g >= 2) m = 1 - g % 1;        if (g >= 3) m = 0;        d = n(2);        h = n(1);        l = n(0);        c = 1 / (f * l - e * d - 4) * k;        a = E[i] = [(c * (e * l + f * d) + j) / 2, ((i % 2 ? c * (-h - 2) : c * h) + k) / 2];        q(C[J] = i % 2 ? "#373" : "#0f0")    }    setTimeout(X, 9)})()		</script>			</body></html>	