<html>	<head>		<title>JS1K Demo</title>		<meta charset="utf-8">	</head>		<body>		<canvas id="c" width="1024" height="768">		<script>			var b = document.body;			var c = document.getElementsByTagName('canvas')[0];			var a = c.getContext('2d');			document.body.clientWidth; // fix bug in webkit: http://qfox.nl/weblog/218		</script>				<script>			 f = [-.7, .3, .285, -.01, -.8, .16, .4, .4], D = Math, E = D.sin, F = D.random, G = D.atan, H = setTimeout, I = 255;			 function O() {				 clearTimeout(y);				 for (z = 0; z < k / v;) {					 q = p = A = 0;					 d = n + k / l / k * z * v / s;					 for (e = r + 1 / l * u / s; 200 >= d * d + e * e;) B = d, d = d * d - e * e + f[C = 2 * (t % 4)], e = B * e + B * e + f[C + 1], 9 < ++A && (q += p = E(J * G(e, d)));					 h[z++] = (I << 24) + (I * (.5 + E((C = .8 * ((K * q - p) / A)) + L) / 2) << 16) + (I * (.5 + E(C + M) / 2) << 8) + I * (.5 + E(C + N) / 2)				 }				 m.data.set(g);				 w.putImageData(m, 0, 0);				 a.drawImage(x, 0, 0, z, 1, 0, u, k, v);				 u += v;				 u < l && 21 < v ? O() : u < l ? y = H(O, 0) : 1 < v && (v = 9 < v ? 8 : v / 2, y = H(O, u = 0))			 }			 function P(d, e) {				 e && (r = n = -1.4, s = .4, t++);				 x = c.cloneNode();				 w = x.getContext("2d");				 k = x.width = c.width = innerWidth;				 l = c.height = innerHeight - 40;				 g = new Uint8Array(B = new ArrayBuffer(4 * k));				 h = new Uint32Array(B);				 m = a.createImageData(k, 1);				 u = 0;				 O(v = 22)			 }			 function Q(d) {				 L = F();				 M = F();				 N = F();				 J = 25 * F() + .5;				 K = 35 * F() + 6;				 d || (u = 0, O(v = 22))			 }			 B = '<button onclick="';			 b.innerHTML = B + 'P(0,1)">Next</button>' + B + 'Q()">Rand</button>';			 b.appendChild(c).onwheel = c.onmousewheel = function(d) {				 e = d.clientX, p = d.clientY - 40, q = n + k / l / s / (k / e), R = r + 1 / s / (l / p);				 s = 0 < (d.wheelDelta || -d.deltaY) ? 1.3 * s : s / 1.3;				 n = q - k / l / (k / e) / s;				 r = R - 1 / (l / p) / s;				 u = 0;				 O(v = 22)			 };			 Q(1);			 P(y = b.style.margin = t = 0, 1);			 onresize = P;		</script>			</body></html>	