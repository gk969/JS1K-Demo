<html>	<head>		<title>JS1K Demo</title>		<meta charset="utf-8">	</head>		<body>		<canvas id="c" width="1024" height="768">		<script>			var b = document.body;			var c = document.getElementsByTagName('canvas')[0];			var a = c.getContext('2d');			document.body.clientWidth; // fix bug in webkit: http://qfox.nl/weblog/218		</script>				<script>(function () {	var grad3,	i,j,a,b,dx,dy,ang,ix,iy,sy,	z=0, l=99,scale=350,	W=innerWidth, H=innerHeight,	doc = document, body = doc.body,	ca,c,	dots=[],	M=Math,		f=M.floor, ra=M.random,		x0, y0, i1, iijj;		body.style.cssText="margin:0;overflow:hidden";		ca=body.children[0]; 	ca.width  = W; 	ca.height = H;	c = ca.getContext("2d");		for (i=0;i<l;)		dots[i++]=({	x:i, y:i, col:"#"+f(ra()*9)+"88"});			setInterval(function () {		c.fillStyle = "rgba(220,220,220,.35)";		c.fillRect(0,0,W,H);		z+=.003;		for(i=0;i<l;) {			a=dots[i++];			ix=noise(a.x / scale + z, sy=a.y / scale) * 5 + a.x;			iy=noise(a.x / scale - z, sy) * 5 + a.y;			ix+=(W/2-ix)/50;			iy+=(H/2-iy)/50;						for(j=i+1;j<l;) {				b=dots[j++];				dx=b.x-ix;				dy=b.y-iy;				if(M.sqrt(dx*dx+dy*dy)<20) {					ang=M.atan2(dy, dx);					b.x+=((ix + M.cos(ang)*20)-b.x)/4;					b.y+=((iy + M.sin(ang)*20)-b.y)/4;				}			}			c.fillStyle = a.col;			c.fillRect(a.x=ix, a.y=iy, 2, 2);		}	}, 20);		/*********** PERLIN *************		Based on Sean McCullough's implementation of Stefan Gustavson's java 2D SimplexNoise	http://gist.github.com/304522		********************************/	grad3 = [[1,1],[-1,1],[1,-1],[-1,-1],              [1,0],[-1,0],[1,0],[-1,0],              [0,1],[0,-1],[0,1],[0,-1]];	function noise(xin, yin) {		b = (xin+yin)*.366;		dx = f(xin+b);		dy = f(yin+b);		j = (dx+dy)*.21;		x0 = xin-(dx-j);		y0 = yin-(dy-j);				i1=x0>y0;		return 70 * (gg(x0,y0, (iijj = (dx & 255) + (dy & 255)) % 12) + gg(x0 - i1 + .21,y0 - !i1 + .21,(iijj+1) % 12) + gg(x0 - .58,y0 - .58,(iijj+2) % 12)); 	};	function gg(x,y,g) {		j = 0.5 - x*x-y*y;		if(j<0) return 0;		return j * j * j * (grad3[g][0]*x + grad3[g][1]*y);	}})();		</script>			</body></html>	