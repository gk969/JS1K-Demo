<html>	<head>		<title>JS1K Demo</title>		<meta charset="utf-8">	</head>		<body>		<canvas id="c" width="1024" height="768">		<script>			var b = document.body;			var c = document.getElementsByTagName('canvas')[0];			var a = c.getContext('2d');			document.body.clientWidth; // fix bug in webkit: http://qfox.nl/weblog/218		</script>				<script>document.bgColor = '#000';var canvas = document.getElementById( 'c' );var context = canvas.getContext( '2d' );var width = canvas.width = 460;var height = canvas.height = 460;var img_data = context.getImageData( 0, 0, width , height );var max_particles = 50000;var particles = [];var rnd = Math.random;var max = Math.max;var i = 0;while ( particles.length < max_particles ){  particles.push( { x: ( rnd() * width ) | 0, y: ( rnd() * height ) | 0, vx: 0, vy: 0 });}function erase( index ){  var p = particles[ i ];  if ( p.x >= 0 && p.x < width && p.y >= 0 && p.y < height )  {    var idx = ( ( p.x | 0) + ( p.y | 0) * width ) * 4;    img_data.data[ idx + 3 ] = 0;  }}function x_movement_fn( particle ){  return Math.sin( particle.y / 100 ) - 0.5;}function y_movement_fn( particle ){  return Math.sin( particle.x / 100 ) - 0.5;}function update( index ){  var p = particles[ i ];  p.x += p.vx;  p.y += p.vy;  if ( p.x < 0 )    {    p.x = width + p.x;  }  else if ( p.x >= width )  {    p.x -= width;  }  if ( p.y < 0 )  {    p.y = height + p.y;  }  else if ( p.y >= height )  {    p.y -= height;  }    // updates acceleration  p.vy = y_movement_fn( p );  p.vx = x_movement_fn( p );}function draw( index ){  var p = particles[ i ];  if ( p.x >= 0 && p.x < width && p.y >= 0 && p.y < height )  {    var idx = ( ( p.x | 0 ) + ( p.y | 0 ) * width ) * 4;    img_data.data[ idx + 0 ] = 255;    img_data.data[ idx + 1 ] = 255;    img_data.data[ idx + 2 ] = 255;    img_data.data[ idx + 3 ] = 255;  }}setInterval(    function()  {    for ( i = 0; i < max_particles; i++ )    {      erase( i );      update( i );      draw( i );    }    context.putImageData( img_data, 0, 0 );  },  10)		</script>			</body></html>	